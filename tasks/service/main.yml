---
# Service tasks for all operating systems

- block:

  - name: enable and start docker service
    service:
      name: docker
      enabled: yes
      state: started

  - name: enable docker storage setup service
    service:
      name: docker-storage-setup
      enabled: yes

  - name: start docker storage setup service
    service:
      name: docker-storage-setup
      state: started
    when: docker_engine_storage_driver | length != 0

  tags:
    - role::docker_engine
    - role::docker_engine::service
